{% extends "../../../partials/layout.njk" %}

{% set pageId = "unarchive-goal" %}
{% set pageTitle = "You are reactivating a goal for the prisoner" %}

{% block beforeContent %}
  {% include "../../../partials/breadcrumb.njk" %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      {% if goal.isFulfilled() %}
        {% set goal = goal.value %}

        <h1 class="govuk-heading-l">Are you sure you want to reactivate this goal?</h1>
        <p class='govuk-body'>Reactivating goals moves them back to in progress.</p>

        <section class="archive-goal-summary">
          <h3 class="govuk-heading-s">Goal</h3>
          <p class="govuk-body app-u-multiline-text" data-qa="goal-to-be-archived-summary">{{ goal.title }}</p>
        </section>

        <form class="form" method="post" novalidate="">
          <input type="hidden" name="_csrf" value="{{ csrfToken }}" />

          <div class="govuk-form-group">
            {{ govukButton({
              id: "submit-button",
              name: "action",
              text: "Yes, reactivate goal",
              classes: "moj-button-menu__item",
              attributes: {
                'data-qa': 'goal-unarchive-submit-button'
              },
              preventDoubleClick: true
            }) }}

            {{ govukButton({
              type: "a",
              href: "/plan/" + prisonerSummary.prisonNumber + "/view/goals#archived-goals",
              id: "back-to-archive-goal-button",
              text: "No, go back to archived goals",
              classes: "moj-button-menu__item govuk-button--secondary",
              attributes: {
                'data-qa': 'goal-unarchive-back-button'
              },
              preventDoubleClick: true
            }) }}
          </div>
        </form>

      {% else %}

        <h2 class="govuk-heading-s" data-qa="goal-unavailable-message">We cannot show these details right now</h2>
        <p class="govuk-body">Reload the page or try again later. Other parts of this service may still be available.</p>
      {% endif %}

    </div>
  </div>

{% endblock %}
