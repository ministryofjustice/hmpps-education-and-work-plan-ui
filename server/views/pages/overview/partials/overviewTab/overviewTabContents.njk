{# Nunjucks template to display the prisoner's main Overview page

Data supplied to this template:
  * prisonerSummary - object with firstName and lastName
  * prisonerGoals - object containing prisoner goal summary data - see template _goalsSummaryCard.njk
  * inPrisonCourses - object containing in-prison course summary data - see template _educationAndTrainingSummaryCard.njk
  * functionalSkills - object containing summary data of prisoner's most receent functional skills - see template _educationAndTrainingSummaryCard.njk
  * sessionHistory - object containing summary data of CIAG sessions with the prisoner - see template _sessionHistorySummaryCard.njk
  * hasEditAuthority - boolean indicating whether the user has edit authority in the PLP system
  * induction: {
  *   problemRetrievingData: boolean
  *   isPostInduction - boolean indicating whether this is pre- or post-induction. IE. whether the prisoner has a completed Induction or not
  * }

#}

{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "../../../../components/actions-card/macro.njk" import actionsCard %}

<div class="govuk-grid-row">
  {% set createInductionBanner %}
    <p class="govuk-notification-banner__heading" data-qa="notification-banner-heading">
        Create goals and add education, work, skills, and interests to
        <a class="govuk-notification-banner__link" data-qa="notification-banner-link" href="/prisoners/{{ prisonerSummary.prisonNumber }}/create-induction/hoping-to-work-on-release">make a progress plan now</a>.
    </p>
  {% endset %}

  {% block content %}
    <div class="govuk-grid-column-two-thirds app-u-print-full-width">
      {% if not induction.problemRetrievingData and not induction.isPostInduction and hasEditAuthority %}
        <section data-qa="pre-induction-overview">
          {{ govukNotificationBanner({
            html: createInductionBanner
          }) }}
        </section>
      {% endif %}

      {% include './_goalsSummaryCard.njk' %}

      {% if reviewJourneyEnabledForPrison %}
        {% include './_sessionHistorySummaryCard.njk' %}
      {% endif %}

      {% include './_educationAndTrainingSummaryCard.njk' %}
    </div>

    <div class="govuk-grid-column-one-third app-u-print-full-width">

      <div class="govuk-summary-card actions-card govuk-!-display-none-print" data-qa="actions-card">
        <div class="govuk-summary-card__title-wrapper govuk-!-padding-bottom-2">
          <h2 class="govuk-summary-card__title govuk-!-font-size-24">Actions</h2>
        </div>

        <div class="govuk-summary-card__content govuk-!-padding-bottom-0 govuk-!-padding-top-2">
          <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Reviews</h3>
          <span class="govuk-tag govuk-!-margin-top-2 govuk-!-margin-bottom-2 govuk-tag--grey">Review due by 29 Sep 2024</span>
          <ul class="govuk-list govuk-!-margin-0">
            <li class="govuk-!-margin-0 govuk-!-padding-bottom-3 govuk-!-padding-top-3">
              <a class="govuk-link" data-qa="add-goal-button" id="add-goal-button" href="/plan/A5502DZ/goals/create">
                <span class="goal-action">
                  <img src="/assets/images/icon-goal.svg" role="presentation" alt="" width="35px" height="28px" class="goal-icon">
                  Mark review as complete
                </span>
              </a>
            </li>
            <li class="govuk-!-margin-0 govuk-!-padding-bottom-3 govuk-!-padding-top-3">
              <a class="govuk-link" data-qa="add-goal-button" id="add-goal-button" href="/plan/A5502DZ/goals/create">
                <span class="goal-action">
                  <img src="/assets/images/icon-goal.svg" role="presentation" alt="" width="35px" height="28px" class="goal-icon">
                  Record exemption for this prisoner
                </span>
              </a>
            </li>
          </ul>
        </div>

        <div class="govuk-summary-card__content govuk-!-padding-bottom-0 govuk-!-padding-top-2">
          <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Goals</h3>
          <ul class="govuk-list govuk-!-margin-0">
            <li class="govuk-!-margin-0 govuk-!-padding-bottom-3 govuk-!-padding-top-3">
              <a class="govuk-link" data-qa="add-goal-button" id="add-goal-button" href="/plan/A5502DZ/goals/create">
                <span class="goal-action">
                  <img src="/assets/images/icon-goal.svg" role="presentation" alt="" width="35px" height="28px" class="goal-icon">
                  Add a new goal
                </span>
              </a>
            </li>
          </ul>
        </div>
      </div>

    </div>
  {% endblock %}
</div>