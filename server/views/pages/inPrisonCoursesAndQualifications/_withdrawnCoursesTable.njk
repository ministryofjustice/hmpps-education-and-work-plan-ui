<table class="govuk-table" data-module="moj-sortable-table" data-qa="withdrawn-courses-sortable-table">
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">Name</th>
      <th scope="col" class="govuk-table__header" aria-sort="none">Type</th>
      <th scope="col" class="govuk-table__header" aria-sort="none">Location</th>
      <th scope="col" class="govuk-table__header" aria-sort="descending">Start date</th>
      <th scope="col" class="govuk-table__header" aria-sort="none">End date</th>
      <th scope="col" class="govuk-table__header" aria-sort="none">Status</th>
      <th scope="col" class="govuk-table__header">Reason</th>
    </tr>
  </thead>

  <tbody class="govuk-table__body">
    {% for course in withdrawnCourses | sort(attribute = 'courseStartDate', reverse = true) %}
      {% set prisonName = prisonNamesById[course.prisonId] | default(course.prisonId) %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" data-qa="course-name">{{ course.courseName }}</td>
        <td class="govuk-table__cell">{{ course.isAccredited | formatIsAccredited }}</td>
        <td class="govuk-table__cell">{{ prisonName }}</td>
        <td class="govuk-table__cell" data-sort-value="{{ course.courseStartDate | formatDate('yyyyMMdd') }}">{{ course.courseStartDate | formatDate('d MMMM yyyy') }}</td>
        <td class="govuk-table__cell" data-sort-value="{{ course.courseCompletionDate | formatDate('yyyyMMdd') }}">{{ course.courseCompletionDate | formatDate('d MMMM yyyy') }}</td>
        <td class="govuk-table__cell">{{ course.courseStatus | formatCuriousCourseStatus }}</td>
        <td class="govuk-table__cell">{{ course.withdrawalReason }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
